<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Post</title>
  <link rel="stylesheet" href="/css/webix.min.css" type="text/css">
</head>
<body>
<script src="/js/webix.min.js" type="text/javascript"></script>
<script>
    webix.ready(function() {
        webix.ui({
            view:"datatable",
            autoheight:true,
            minHeight:100,
            autowidth:true,
            columns: [
                {id: "id", header: "id", width: 50},
                {id: "title", header: "标题", width: 200},
                {id: "body", header: "内容", width: 500},
                {id: "update_time", header: "创建时间", width: 150, template:function(obj){return new Date(obj.update_time).toLocaleString()}}
            ],

            url:async function () {
                const response = await webix.ajax().headers({token: window.localStorage.getItem("token")}).get("/api/post")
                const res = await response.json()
                if (res.code !== 200) {
                    webix.alert(res.msg)
                } else {
                    return res.data
                }
            }
        });
    })
</script>
</body>
</html>